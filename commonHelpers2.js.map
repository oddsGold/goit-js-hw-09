{"version":3,"file":"commonHelpers2.js","sources":["../src/js/form.js"],"sourcesContent":["class Feedback {\r\n  feedbackForm = document.querySelector(\".feedback-form\");\r\n  localStorageKey = \"feedback-form-state\";\r\n  feedbackFormObj = {};\r\n\r\n  constructor() {\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents(){\r\n    document.addEventListener(\"DOMContentLoaded\", () => {\r\n      if(localStorage.getItem(this.localStorageKey)) {\r\n        //check if there is data with the required key in local storage (if there is, overwrite the local object)\r\n        this.feedbackFormObj = JSON.parse(localStorage.getItem(this.localStorageKey));\r\n\r\n        //insert data to form fields\r\n        this.insertValues(localStorage.getItem(this.localStorageKey));\r\n      }\r\n    });\r\n\r\n    this.feedbackForm.addEventListener(\"input\", (e) => {\r\n      //add to local object input value\r\n      this.handleForm(e);\r\n\r\n      //add to localStorage object with form data\r\n      this.setToStorage(this.feedbackFormObj);\r\n    });\r\n\r\n    this.feedbackForm.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      //clear the form, localStorage and object with form data fields\r\n      if(this.feedbackForm.elements.message.value && this.feedbackForm.elements.email.value !== \"\") {\r\n        this.removeStorageItem(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  insertValues(localStorageObj) {\r\n    const jsonData = JSON.parse(localStorageObj);\r\n    for (let key in jsonData) {\r\n      this.feedbackForm.querySelector('[name=\"'+key+'\"]').value = (jsonData[key]);\r\n    }\r\n  }\r\n\r\n  handleForm(e) {\r\n    this.feedbackFormObj[e.target.name] = e.target.value;\r\n  }\r\n\r\n  setToStorage(formObj) {\r\n    localStorage.setItem(this.localStorageKey, JSON.stringify(formObj));\r\n  }\r\n\r\n  removeStorageItem(e)  {\r\n    console.log(this.feedbackFormObj);\r\n    localStorage.removeItem(this.localStorageKey);\r\n    this.feedbackForm.reset();\r\n    Object.keys(this.feedbackFormObj).forEach(key => delete this.feedbackFormObj[key]);\r\n  }\r\n}\r\n\r\nnew Feedback();"],"names":["Feedback","__publicField","localStorageObj","jsonData","key","formObj"],"mappings":"4NAAA,MAAMA,CAAS,CAKb,aAAc,CAJdC,EAAA,oBAAe,SAAS,cAAc,gBAAgB,GACtDA,EAAA,uBAAkB,uBAClBA,EAAA,uBAAkB,CAAA,GAGhB,KAAK,WAAU,CAChB,CAED,YAAY,CACV,SAAS,iBAAiB,mBAAoB,IAAM,CAC/C,aAAa,QAAQ,KAAK,eAAe,IAE1C,KAAK,gBAAkB,KAAK,MAAM,aAAa,QAAQ,KAAK,eAAe,CAAC,EAG5E,KAAK,aAAa,aAAa,QAAQ,KAAK,eAAe,CAAC,EAEpE,CAAK,EAED,KAAK,aAAa,iBAAiB,QAAU,GAAM,CAEjD,KAAK,WAAW,CAAC,EAGjB,KAAK,aAAa,KAAK,eAAe,CAC5C,CAAK,EAED,KAAK,aAAa,iBAAiB,SAAW,GAAM,CAClD,EAAE,eAAc,EAEb,KAAK,aAAa,SAAS,QAAQ,OAAS,KAAK,aAAa,SAAS,MAAM,QAAU,IACxF,KAAK,kBAAkB,CAAC,CAEhC,CAAK,CACF,CAED,aAAaC,EAAiB,CAC5B,MAAMC,EAAW,KAAK,MAAMD,CAAe,EAC3C,QAASE,KAAOD,EACd,KAAK,aAAa,cAAc,UAAUC,EAAI,IAAI,EAAE,MAASD,EAASC,CAAG,CAE5E,CAED,WAAW,EAAG,CACZ,KAAK,gBAAgB,EAAE,OAAO,IAAI,EAAI,EAAE,OAAO,KAChD,CAED,aAAaC,EAAS,CACpB,aAAa,QAAQ,KAAK,gBAAiB,KAAK,UAAUA,CAAO,CAAC,CACnE,CAED,kBAAkB,EAAI,CACpB,QAAQ,IAAI,KAAK,eAAe,EAChC,aAAa,WAAW,KAAK,eAAe,EAC5C,KAAK,aAAa,QAClB,OAAO,KAAK,KAAK,eAAe,EAAE,QAAQD,GAAO,OAAO,KAAK,gBAAgBA,CAAG,CAAC,CAClF,CACH,CAEA,IAAIJ"}